import{Router as e,matchRoutes as t,useLocation as r,useResolvedLocation as n,useParams as a,useRoutes as u,createRoutesFromChildren as o}from"react-router";export{MemoryRouter,Navigate,Outlet,Redirect,Route,Router,createRoutesFromChildren,generatePath,matchRoutes,resolveLocation,useBlocker,useHref,useLocation,useMatch,useNavigate,useOutlet,useParams,useResolvedLocation}from"react-router";export{HashRouter,Link,NavLink,Prompt,usePrompt}from"react-router-dom";import i,{createContext as c,useContext as s,useTransition as m,useRef as f,useState as l,useEffect as h,useMemo as v,createElement as p}from"react";import{createBrowserHistory as d}from"history";import{createContainer as y}from"react-tracked";import{prepare as P,run as g,prefetch as E}from"react-suspense-fetch";function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var S=c(null),b=function(e){return i.createElement(S.Provider,{value:e.history},e.children)},w=c(!1),O=function(e){return i.createElement(w.Provider,{value:e.suspensePending},e.children)},k=function(){return s(w)},L=function(t){var r=t.timeout,n=t.window,a=t.children,u=m(r?{timeoutMs:r}:null),o=u[0],c=u[1],s=f();return s.current||(s.current=function(e){return function(t){return R({},t,{listen:function(r){return t.listen(function(t){e(function(){r(t)})})}})}}(o)(d({window:n}))),i.createElement(b,{history:s.current},i.createElement(O,{suspensePending:c},i.createElement(e,{history:s.current,timeout:r},a)))},x=y(function(e){return[e.data,null]}),M=x.useTrackedState,N=x.Provider,T=function(){return M({unstable_ignoreStateEquality:!0})},D=x.useSelector,I=Symbol("INITIALIZED_MAP"),j=function(e){var r=e.history,n=e.routePath,a=e.basename,u=e.caseSensitive,o=e.fetchData,c=e.match,s=e.children,m=f(),v=f(),p=l(function(){var e=function(e,t,r,n,a,u){var o=function(e){var t=e,r=t[I];return r||(r=new Map,t[I]=r),r}(e),i=JSON.stringify({path:r,basename:n,caseSensitive:a,match:u});if(!o.has(i)){var c=t(u),s=setTimeout(function(){o.delete(i)},3e4);o.set(i,{data:c,commit:function(){clearTimeout(s)},cleanup:function(){o.delete(i),clearTimeout(s)}})}return o.get(i)}(r,o,n,a,u,c);return m.current=e.commit,v.current=e.cleanup,e.data}),d=p[0],y=p[1];return h(function(){var e=r.listen(function(e){var r=e.location;m.current&&m.current();var i=t([{path:n}],r,a,u);i&&i.length&&(y(o({params:i[0].params,pathname:i[0].pathname})),v.current&&v.current())});return function(){v.current&&v.current(),e()}},[r,n,a,u,o]),i.createElement(N,{data:d},s)},H={pathname:null},A=function(e,o,i){void 0===o&&(o=""),void 0===i&&(i=!1);var c=function(){var e=s(S);if(!e)throw new Error("missing <HistoryContext>");return e}(),m=r(),f=n(H).pathname,l=a(),h=o?(f+"/"+o).replace(/\/\/+/g,"/"):f,d=v(function(){return t(e,m,h,i)},[e,m,h,i]),y=[].concat(e);return(d||[]).forEach(function(e){if(e.route){var t=y.indexOf(e.route);if(-1!==t){var r=y[t];if(function(e){return!!e.element}(r)){var n=r.element.props.fetchData;if(n){var a=R({},l,{},e.params),u=p(j,{key:r.path,history:c,routePath:r.path,basename:h,caseSensitive:i,fetchData:n,match:{params:a,pathname:e.pathname}},r.element);y[t]=R({},r,{element:u})}}}}}),u(y,o,i)},C=function(e){var t=e.basename,r=void 0===t?"":t,n=e.caseSensitive,a=void 0!==n&&n,u=o(e.children);return A(u,r,a)},_=function(e){var t=P(e),r=function(e){var t=e[0],r=e[1];try{return Promise.resolve(t(r))}catch(e){return Promise.reject(e)}};return function(e){return g(t,null),E(r,[t,e],function(e){return[e[0].default,e[1]]})}};export{L as BrowserRouter,_ as LazyFetcher,C as Routes,T as useRouteData,D as useRouteDataSelector,A as useRoutes,k as useSuspensePending};
//# sourceMappingURL=index.esm.js.map
