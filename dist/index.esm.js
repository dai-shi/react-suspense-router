import{Router as e,useResolvedLocation as r,useParams as t,useLocation as n,useRoutes as i,createRoutesFromChildren as u,matchRoutes as o}from"react-router";export{Navigate,Outlet,Redirect,Route,createRoutesFromChildren,generatePath,matchRoutes,resolveLocation,useBlocker,useHref,useLocation,useMatch,useNavigate,useOutlet,useParams,useResolvedLocation}from"react-router";export{Link,NavLink,Prompt,usePrompt}from"react-router-dom";import a,{createContext as c,useContext as s,useTransition as l,useRef as m,useState as f,useEffect as v}from"react";import{createMemoryHistory as d,createBrowserHistory as h,createHashHistory as p}from"history";import{createContainer as y}from"react-tracked";import{prepare as E,run as P,prefetch as g}from"react-suspense-fetch";function w(){return(w=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var O=c(null),R=function(e){return a.createElement(O.Provider,{value:e.history},e.children)},b=c(!1),x=function(e){return a.createElement(b.Provider,{value:e.suspensePending},e.children)},S=function(){return s(b)},k=function(r){var t=r.history,n=r.timeout,i=void 0===n?2e3:n,u=r.children,o=l({timeoutMs:i}),c=o[0],s=o[1],f=m();return f.current||(f.current=function(e){return function(r){return w({},r,{listen:function(t){return r.listen(function(r){e(function(){t(r)})})}})}}(c)(t)),a.createElement(R,{history:f.current},a.createElement(x,{suspensePending:s},a.createElement(e,{history:f.current,timeout:i},u)))},L=function(e){var r=e.initialEntries,t=e.initialIndex,n=e.timeout,i=e.children,u=m();return u.current||(u.current=d({initialEntries:r,initialIndex:t})),a.createElement(k,{history:u.current,timeout:n},i)},j=function(e){var r=e.window,t=e.timeout,n=e.children,i=m();return i.current||(i.current=h({window:r})),a.createElement(k,{history:i.current,timeout:t},n)},N=function(e){var r=e.window,t=e.timeout,n=e.children,i=m();return i.current||(i.current=p({window:r})),a.createElement(k,{history:i.current,timeout:t},n)},C=function(e){return!!e.element},D=y(function(e){return[e.data,null]}),H=D.useTrackedState,I=D.Provider,M=function(){return H({unstable_ignoreStateEquality:!0})},q=D.useSelector,B={pathname:null},F=function(e,u,c){void 0===u&&(u=""),void 0===c&&(c=!1);var l=function(){var e=s(O);if(!e)throw new Error("missing <HistoryContext>");return e}(),d=r(B).pathname,h=t(),p=m(n()),y=u?(d+"/"+u).replace(/\/\/+/g,"/"):d,E=f({}),P=E[0],g=E[1],R=m();v(function(){R.current={routesOrig:e,basename:y,caseSensitive:c,parentParams:h}}),v(function(){var e=function(e){var r,t,n;(o(null==(r=R.current)?void 0:r.routesOrig,e.location,null==(t=R.current)?void 0:t.basename,null==(n=R.current)?void 0:n.caseSensitive)||[]).forEach(function(e){var r,t=e.params,n=e.pathname,i=e.route;if(i&&C(i)){var u=i.element.props.fetchData;if(u){var o=u({params:w({},null==(r=R.current)?void 0:r.parentParams,{},t),pathname:n});g(function(e){var r;return w({},e,((r={})[i.path]=o,r))})}}})},r=l.listen(e);return e({location:p.current}),r},[l]);var b=e.map(function(e){if(!C(e))return e;if(!e.element.props.fetchData)return e;var r=P[e.path];return w({},e,{element:r&&a.createElement(I,{data:r,children:e.element})})});return i(b,u,c)},T=function(e){var r=e.basename,t=void 0===r?"":r,n=e.caseSensitive,i=void 0!==n&&n,o=u(e.children);return F(o,t,i)},_=function(e){var r=E(e),t=function(e){var r=e[0],t=e[1];try{return Promise.resolve(r(t))}catch(e){return Promise.reject(e)}};return function(e){return P(r,null),g(t,[r,e],function(e){return[e[0].default,e[1]]})}};export{j as BrowserRouter,N as HashRouter,_ as LazyFetcher,L as MemoryRouter,k as Router,T as Routes,M as useRouteData,q as useRouteDataSelector,F as useRoutes,S as useSuspensePending};
//# sourceMappingURL=index.esm.js.map
