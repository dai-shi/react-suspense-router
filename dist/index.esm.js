import{useListen as e,useParams as r,matchRoutes as t,useRoutes as n,createRoutesFromChildren as a,useResolvedLocation as u,useLocation as o}from"react-router";export{MemoryRouter,Navigate,Outlet,Redirect,Route,Router,createRoutesFromChildren,generatePath,matchRoutes,resolveLocation,useBlocker,useHref,useLocation,useMatch,useNavigate,useOutlet,useParams,usePending,useResolvedLocation}from"react-router";export{BrowserRouter,HashRouter,Link,NavLink,Prompt,usePrompt}from"react-router-dom";export{StaticRouter}from"react-router-dom/server";import i,{useEffect as c,useState as s,useRef as f}from"react";import{createContainer as v}from"react-tracked";import{prepare as l,prefetch as m,run as d}from"react-suspense-fetch";function p(){return(p=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var h=function(e){return!!e.element},g=function(){return null},y=v(function(e){return[e.data,g]}),_=y.Provider,O=y.useUpdate,R=y.useTrackedState,w=function(e){var r=e.setNotify,t=O();return c(function(){r(t)}),null},P=function(e){var r=e.children;return i.createElement(_,{data:e.data},i.createElement(w,{setNotify:e.setNotify}),r)},b=function(){return R({unstable_ignoreStateEquality:!0})},E=y.useSelector,k={pathname:null},A=function(e){var r=u(k).pathname;return e?(r+"/"+e).replace(/\/\/+/g,"/"):r},S=function(e,r,t){return e.map(function(e){if(!h(e))return e;if(!e.element.props.fetchData)return e;var n=r[e.path];return p({},e,{element:n&&i.createElement(P,{data:n,setNotify:function(r){t&&t.set(e.path,r)},children:e.element})})})},j=function(e,r){var t={};return(e||[]).forEach(function(e){var n=e.params,a=e.pathname,u=e.route;if(u&&h(u)){var o=u.element.props.fetchData;if(o){var i=o({params:p({},r,{},n),pathname:a});t[u.path]=i}}}),t},N=function(e){try{var r=window.__ROUTE_DATA_MAP_CACHE__;return r[e]||(r[e]={}),r[e]}catch(e){return{}}},C="undefined"==typeof window||void 0===window.navigator||(""+window.navigator.userAgent).includes("ServerSideRendering")?function(e,a,u){void 0===a&&(a=""),void 0===u&&(u=!1);var i=A(a),c=r(),s=o(),f=t(e,s,i,u),v=N(i);0===Object.keys(v).length&&Object.assign(v,j(f,c));var l=S(e,v);return n(l,a,u)}:function(a,u,o){void 0===u&&(u=""),void 0===o&&(o=!1);var i=e(),v=A(u),l=r(),m=s(function(){return N(v)}),d=m[0],p=m[1],h=f(new Map),g=f();c(function(){g.current={routesOrig:a,basename:v,caseSensitive:o,parentParams:l}}),c(function(){var e={};return i(function(r){var n,a,u,o,i;if(!function(e){try{var r=window.__ROUTE_DATA_MAP_CACHE__;return!!r[e]&&(delete r[e],!0)}catch(e){return!1}}((null==(n=g.current)?void 0:n.basename)||"")){var c=t(null==(a=g.current)?void 0:a.routesOrig,r,null==(u=g.current)?void 0:u.basename,null==(o=g.current)?void 0:o.caseSensitive);e=j(c||[],(null==(i=g.current)?void 0:i.parentParams)||{}),p(function(r){return 0===Object.keys(r).length&&0===Object.keys(e).length?r:e}),Object.keys(e).forEach(function(e){var r=h.current.get(e);r&&r()})}})},[i]);var y=S(a,d,h.current);return n(y,u,o)},L=function(e){var r=e.basename,t=void 0===r?"":r,n=e.caseSensitive,u=void 0!==n&&n,o=a(e.children);return C(o,t,u)},M=function(e){return function(r){return m(e,r)}},T=function(e){var r=l(e),t=function(e){var r=e[0],t=e[1];try{return Promise.resolve(r(t))}catch(e){return Promise.reject(e)}};return function(e){return d(r,null),m(t,[r,e],function(e){return[e[0].default,e[1]]})}};export{M as FetchData,T as FetchDataLazy,L as Routes,b as useRouteData,E as useRouteDataSelector,C as useRoutes};
//# sourceMappingURL=index.esm.js.map
