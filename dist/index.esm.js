import{useListen as e,useParams as r,matchRoutes as t,useRoutes as n,createRoutesFromChildren as a,useResolvedLocation as u,useLocation as o}from"react-router";export{MemoryRouter,Navigate,Outlet,Redirect,Route,Router,createRoutesFromChildren,generatePath,matchRoutes,resolveLocation,useBlocker,useHref,useLocation,useMatch,useNavigate,useOutlet,useParams,usePending,useResolvedLocation}from"react-router";export{BrowserRouter,HashRouter,Link,NavLink,Prompt,usePrompt}from"react-router-dom";export{StaticRouter}from"react-router-dom/server";import i,{useEffect as c,useState as s,useRef as f}from"react";import{createContainer as v}from"react-tracked";import{prepare as l,prefetch as m,run as d}from"react-suspense-fetch";function p(){return(p=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var h=function(e){return!!e.element},g=v(function(e){return[e.data,function(){return null}]}),y=g.Provider,_=g.useUpdate,O=g.useTrackedState,R=function(e){var r=e.setNotify,t=_();return c(function(){r(t)}),null},w=function(e){var r=e.children;return i.createElement(y,{data:e.data},i.createElement(R,{setNotify:e.setNotify}),r)},P=function(){return O({unstable_ignoreStateEquality:!0})},b=g.useSelector,E={pathname:null},k=function(e){var r=u(E).pathname;return e?(r+"/"+e).replace(/\/\/+/g,"/"):r},A=function(e,r,t){return e.map(function(e){if(!h(e))return e;if(!e.element.props.fetchData)return e;var n=r[e.path];return p({},e,{element:n&&i.createElement(w,{data:n,setNotify:function(r){t&&t.set(e.path,r)},children:e.element})})})},S=function(e,r){var t={};return(e||[]).forEach(function(e){var n=e.params,a=e.pathname,u=e.route;if(u&&h(u)){var o=u.element.props.fetchData;if(o){var i=o({params:p({},r,{},n),pathname:a});t[u.path]=i}}}),t},j=function(e){try{var r=window.__ROUTE_DATA_MAP_CACHE__;return r[e]||(r[e]={}),r[e]}catch(e){return{}}},N="undefined"==typeof window||void 0===window.navigator||(""+window.navigator.userAgent).includes("ServerSideRendering")?function(e,a,u){void 0===a&&(a=""),void 0===u&&(u=!1);var i=k(a),c=r(),s=o(),f=t(e,s,i,u),v=j(i);0===Object.keys(v).length&&Object.assign(v,S(f,c));var l=A(e,v);return n(l,a,u)}:function(a,u,o){void 0===u&&(u=""),void 0===o&&(o=!1);var i=e(),v=k(u),l=r(),m=s(function(){return j(v)}),d=m[0],p=m[1],h=f(new Map),g=f();c(function(){g.current={routesOrig:a,basename:v,caseSensitive:o,parentParams:l}}),c(function(){var e={};return i(function(r){var n,a,u,o,i;if(!function(e){try{var r=window.__ROUTE_DATA_MAP_CACHE__;return!!r[e]&&(delete r[e],!0)}catch(e){return!1}}((null==(n=g.current)?void 0:n.basename)||"")){var c=t(null==(a=g.current)?void 0:a.routesOrig,r,null==(u=g.current)?void 0:u.basename,null==(o=g.current)?void 0:o.caseSensitive);e=S(c||[],(null==(i=g.current)?void 0:i.parentParams)||{}),p(function(r){return 0===Object.keys(r).length&&0===Object.keys(e).length?r:e}),Object.keys(e).forEach(function(e){var r=h.current.get(e);r&&r()})}})},[i]);var y=A(a,d,h.current);return n(y,u,o)},C=function(e){var r=e.basename,t=void 0===r?"":r,n=e.caseSensitive,u=void 0!==n&&n,o=a(e.children);return N(o,t,u)},L=function(e){return function(r){return m(e,r)}},M=function(e){var r=l(e),t=function(e){var r=e[0],t=e[1];try{return Promise.resolve(r(t))}catch(e){return Promise.reject(e)}};return function(e){return d(r,null),m(t,[r,e],function(e){return[e[0].default,e[1]]})}};export{L as FetchData,M as FetchDataLazy,C as Routes,P as useRouteData,b as useRouteDataSelector,N as useRoutes};
//# sourceMappingURL=index.esm.js.map
